<link rel="import" href="../../bower_components/polymer/polymer.html">
<script src="https://cdnjs.cloudflare.com/ajax/libs/simple-slider/1.0.0/simpleslider.js"></script>

<dom-module id="main-page">
  <template>
    <style>
      :host {
        height: 100%;
      }
    </style>

    <div id="sslider" style="width:700px; height:500px; border:solid 1px blue; padding-left:40px;">
      <template id="temp" is="dom-repeat" items=[[images]]>
        <img src="https://komoscope.com/[[item]]" height="500" width="500"/>
      </template>
    </div>

  </template>

  <script>
    Polymer({

        is: 'main-page',

        properties: {
          images: {
            type: Array
          }
        },

        created: function() {
          // Configure unauthenticated access with anon identity pool
          AWS.config.credentials = new AWS.CognitoIdentityCredentials({
            IdentityPoolId: 'us-east-1:b93d8993-e859-4328-a9e7-0e0d8d12e361',
          });
          AWS.config.region = 'us-east-1';

          var dynamodb = new AWS.DynamoDB.DocumentClient();

          var params = {
            TableName: "oeuvres",
            Key: {
              category: "sculpture",
              name: "Transe"
            }
          }

          var me = this;
          dynamodb.get(params, function(err, data) {
            me.images = data.Item.alturls.values;
          });
        },

        attached: function() {
          // Reload slider if children nodes are added / removed
          var ss = document.getElementById('sslider');
          Polymer.dom(ss).observeNodes(function(info) {
            simpleslider.getSlider({
              container: ss,
              children: ss.querySelectorAll('img'),
              prop: 'opacity',
              unit: '',
              init: 0,
              show: 1,
              end: 0
            });
          });
        }
    });
  </script>

</dom-module>
